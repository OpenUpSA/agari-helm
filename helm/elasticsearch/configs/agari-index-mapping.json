{
  "mappings": {
    "dynamic": "true",
    "dynamic_templates": [
      {
        "string_fields_keyword_first": {
          "match_mapping_type": "string",
          "mapping": {
            "type": "keyword",
            "fields": {
              "text": {
                "type": "text",
                "analyzer": "standard"
              }
            }
          }
        }
      },
      {
        "dates_flexible": {
          "match": "*date*|*Date*|*_at|*At",
          "mapping": {
            "type": "date",
            "format": "strict_date_optional_time||epoch_millis||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd'T'HH:mm:ss.SSSSSS||yyyy-MM-dd'T'HH:mm:ss||yyyy-MM-dd||yyyy/MM/dd||dd/MM/yyyy||MM/dd/yyyy||yyyy",
            "ignore_malformed": true
          }
        }
      },
      {
        "numeric_fields": {
          "match": "*age*|*depth*|*coverage*|n50|*_gc|*percentage*|*count*|*size*|*length*",
          "match_mapping_type": "string",
          "mapping": {
            "type": "float",
            "ignore_malformed": true,
            "fields": {
              "keyword": {
                "type": "keyword"
              }
            }
          }
        }
      }
    ],
    "properties": {
      "id": {"type": "keyword"},
      "submission_id": {"type": "keyword"},
      "object_id": {"type": "keyword"},
      "isolate_id": {"type": "keyword"},
      "project_id": {"type": "keyword"},
      "pathogen_id": {"type": "keyword"},
      "status": {
        "type": "keyword",
        "fields": {
          "text": {"type": "text"}
        }
      },
      "created_at": {
        "type": "date",
        "format": "strict_date_optional_time||epoch_millis||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd'T'HH:mm:ss.SSSSSS"
      },
      "updated_at": {
        "type": "date",
        "format": "strict_date_optional_time||epoch_millis||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd'T'HH:mm:ss.SSSSSS"
      },
      "deleted_at": {
        "type": "date",
        "format": "strict_date_optional_time||epoch_millis||yyyy-MM-dd HH:mm:ss||yyyy-MM-dd'T'HH:mm:ss.SSSSSS"
      },
      "tsv_row": {"type": "integer"},
      "error": {"type": "object", "enabled": true},
      "seq_error": {
        "type": "object",
        "properties": {
          "row": {"type": "integer"},
          "seq_error": {"type": "text"}
        }
      },
      "sample_collection_date": {
        "type": "date",
        "format": "strict_date_optional_time||yyyy-MM-dd||yyyy/MM/dd||dd/MM/yyyy||MM/dd/yyyy||yyyy",
        "ignore_malformed": true
      },
      "geo_loc_name_country": {
        "type": "keyword",
        "fields": {
          "text": {"type": "text"},
          "lower": {
            "type": "keyword",
            "normalizer": "lowercase_normalizer"
          }
        }
      },
      "geo_loc_name_state_province_territory": {
        "type": "keyword",
        "fields": {
          "text": {"type": "text"},
          "lower": {
            "type": "keyword",
            "normalizer": "lowercase_normalizer"
          }
        }
      },
      "lineage_clade_name": {
        "type": "keyword",
        "fields": {
          "text": {"type": "text"}
        }
      }
    }
  },
  "settings": {
    "number_of_shards": 1,
    "number_of_replicas": 1,
    "index": {
      "max_result_window": 100000,
      "mapping": {
        "total_fields": {
          "limit": 5000
        }
      }
    },
    "analysis": {
      "normalizer": {
        "lowercase_normalizer": {
          "type": "custom",
          "filter": ["lowercase", "asciifolding"]
        }
      }
    }
  }
}